<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}DomiFlash - Delivery de comida rÃ¡pida{% endblock %}</title>
  
  <!-- PWA Meta Tags -->
  <meta name="application-name" content="DomiFlash">
  <meta name="description" content="{% block description %}DomiFlash - El mejor servicio de delivery de comida. Entrega rÃ¡pida, restaurantes de calidad.{% endblock %}">
  <meta name="keywords" content="delivery, comida, restaurantes, domicilio, rÃ¡pido, pwa">
  <meta name="theme-color" content="#FF6B35">
  <meta name="color-scheme" content="light dark">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="DomiFlash">
  <meta name="format-detection" content="telephone=no">
  
  <!-- Manifest -->
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  
  <!-- Favicons -->
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='img/brand/favicon.ico') }}">
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='img/brand/logo-192.png') }}">
  <link rel="apple-touch-icon" sizes="152x152" href="{{ url_for('static', filename='img/brand/logo-152.png') }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='img/brand/logo-180.png') }}">
  
  <!-- Open Graph -->
  <meta property="og:title" content="{% block og_title %}DomiFlash - Delivery de comida rÃ¡pida{% endblock %}">
  <meta property="og:description" content="{% block og_description %}La aplicaciÃ³n de delivery mÃ¡s rÃ¡pida y confiable{% endblock %}">
  <meta property="og:image" content="{{ url_for('static', filename='img/brand/og-image.jpg', _external=True) }}">
  <meta property="og:url" content="{{ request.url }}">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="DomiFlash">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% block twitter_title %}DomiFlash - Delivery de comida rÃ¡pida{% endblock %}">
  <meta name="twitter:description" content="{% block twitter_description %}La aplicaciÃ³n de delivery mÃ¡s rÃ¡pida y confiable{% endblock %}">
  <meta name="twitter:image" content="{{ url_for('static', filename='img/brand/twitter-card.jpg', _external=True) }}">
  
  <!-- Preload critical resources -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" as="style">
  <link rel="preload" href="{{ url_for('static', filename='js/main.js') }}" as="script">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- ConfiguraciÃ³n Tailwind personalizada -->
  <script src="{{ url_for('static', filename='js/tailwind.config.js') }}"></script>
  
  <!-- Dark mode styles -->
  <style>
    :root {
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --text-primary: #1a1a1a;
      --text-secondary: #6b7280;
      --border-color: #e5e7eb;
    }
    
    [data-theme="dark"] {
      --bg-primary: #1a1a1a;
      --bg-secondary: #2d2d2d;
      --text-primary: #ffffff;
      --text-secondary: #b3b3b3;
      --border-color: #404040;
    }
    
    body { 
      font-family: 'Inter', system-ui, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    /* Asegurar que los dropdowns aparezcan por encima de todo */
    #user-dropdown {
      position: fixed !important;
      z-index: 9999 !important;
    }
    
    /* Dark mode utilities */
    .dark {
      color-scheme: dark;
    }
    
    .dark body {
      background-color: #1a1a1a;
      color: #ffffff;
    }
    
    /* Keyboard navigation styles */
    .keyboard-navigation button:focus,
    .keyboard-navigation a:focus,
    .keyboard-navigation input:focus,
    .keyboard-navigation select:focus,
    .keyboard-navigation textarea:focus {
      outline: 2px solid #FF6B35;
      outline-offset: 2px;
    }
    
    /* Skip link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: #FF6B35;
      color: white;
      padding: 8px;
      text-decoration: none;
      border-radius: 4px;
      z-index: 100;
      transition: top 0.3s;
    }
    
    .skip-link:focus {
      top: 6px;
    }
    
    /* Loading animation for better UX */
    .page-loading {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    .page-loaded {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen page-loading transition-all duration-300" id="main-content">
  <!-- Skip Navigation -->
  <a href="#main-content" class="skip-link">Saltar al contenido principal</a>
  
  <!-- Header Profesional -->
  <header class="bg-gradient-to-r from-domi-orange to-domi-red shadow-lg fixed top-0 left-0 right-0 z-[100] overflow-hidden">
    <!-- PatrÃ³n de fondo decorativo -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 left-0 w-32 h-32 bg-white rounded-full -translate-x-16 -translate-y-16"></div>
      <div class="absolute top-0 right-0 w-24 h-24 bg-white rounded-full translate-x-12 -translate-y-12"></div>
      <div class="absolute bottom-0 left-1/2 w-40 h-40 bg-white rounded-full -translate-x-20 translate-y-20"></div>
    </div>
    
    <div class="container mx-auto px-4 relative">
      <div class="flex items-center justify-between py-4">
        <!-- Logo y Marca -->
        <div class="flex items-center space-x-3 z-10">
          <div class="bg-white p-2 rounded-xl shadow-lg">
            <div class="w-8 h-8 bg-domi-gradient rounded-lg flex items-center justify-center text-white font-bold text-lg">
              ğŸ•
            </div>
          </div>
          <div>
            <h1 class="text-2xl font-bold text-white tracking-tight">DomiFlash</h1>
            <p class="text-orange-100 text-xs">Delivery rÃ¡pido y confiable</p>
          </div>
        </div>

        <!-- NavegaciÃ³n Desktop -->
        <nav class="hidden md:flex items-center space-x-8">
          <a href="{{ url_for('index') }}" class="text-white hover:text-domi-yellow transition-colors duration-200 font-medium flex items-center space-x-1">
            <span>ğŸ </span>
            <span>Inicio</span>
          </a>
          {% if session.logged_in %}
            {% if session.role == 'cliente' %}
            <a href="{{ url_for('cliente.menu') }}" class="text-white hover:text-domi-yellow transition-colors duration-200 font-medium flex items-center space-x-1">
              <span>ğŸ½ï¸</span>
              <span>Restaurantes</span>
            </a>
            <a href="{{ url_for('cliente.mostrar_carrito') }}" class="text-white hover:text-domi-yellow transition-colors duration-200 font-medium flex items-center space-x-1">
              <span>ğŸ›’</span>
              <span>Carrito</span>
            </a>
            <a href="{{ url_for('cliente.mis_pedidos') }}" class="text-white hover:text-domi-yellow transition-colors duration-200 font-medium flex items-center space-x-1">
              <span>ğŸ“¦</span>
              <span>Mis Pedidos</span>
            </a>
            {% endif %}
          {% else %}
          <a href="{{ url_for('cliente.menu') }}" class="text-white hover:text-domi-yellow transition-colors duration-200 font-medium flex items-center space-x-1">
            <span>ğŸ½ï¸</span>
            <span>MenÃº</span>
          </a>
          {% endif %}
        </nav>

        <!-- Botones de acciÃ³n -->
        <div class="hidden md:flex items-center space-x-4">
          {% if session.logged_in %}
            <!-- Usuario logueado -->
            <div class="flex items-center space-x-3">
              <!-- Avatar y info del usuario -->
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center text-white font-bold text-lg backdrop-blur-sm">
                  {% if session.role == 'cliente' %}ğŸ‘¤
                  {% elif session.role == 'restaurante' %}ğŸ½ï¸
                  {% elif session.role == 'repartidor' %}ğŸšš
                  {% elif session.role == 'administrador' %}âš™ï¸
                  {% else %}ğŸ‘¤{% endif %}
                </div>
                <div class="text-white text-sm">
                  <div class="opacity-75 text-xs">{{ session.role|title if session.role else 'Usuario' }}</div>
                  <div class="font-semibold">{{ session.user_name or 'Usuario' }}</div>
                </div>
              </div>
              
              <!-- Dropdown menu -->
              <div class="relative">
                <button id="user-menu-btn" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-full transition-all duration-200 font-medium backdrop-blur-sm flex items-center space-x-2">
                  <span>Mi Cuenta</span>
                  <svg class="w-4 h-4 transition-transform duration-200" id="dropdown-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>
                
                <!-- Dropdown content -->
                <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-[110]">
                  <div class="py-2">
                    {% if session.role == 'cliente' %}
                    <a href="{{ url_for('cliente.perfil') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸ‘¤ Mi Perfil
                    </a>
                    <a href="{{ url_for('cliente.mis_pedidos') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸ“¦ Mis Pedidos
                    </a>
                    {% elif session.role == 'restaurante' %}
                    <a href="{{ url_for('restaurante.perfil') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸ½ï¸ Mi Restaurante
                    </a>
                    <a href="{{ url_for('restaurante.listar_productos') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸ• Productos
                    </a>
                    <a href="{{ url_for('restaurante.listar_pedidos') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸ“‹ Pedidos
                    </a>
                    {% elif session.role == 'repartidor' %}
                    <a href="{{ url_for('repartidor.perfil') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸšš Mi Perfil
                    </a>
                    <a href="{{ url_for('repartidor.listar_pedidos') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸš› Entregas
                    </a>
                    {% elif session.role == 'administrador' %}
                    <a href="{{ url_for('admin.list_users') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      âš™ï¸ GestiÃ³n Usuarios
                    </a>
                    <a href="{{ url_for('admin.list_categories') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                      ğŸ“‚ CategorÃ­as
                    </a>
                    {% endif %}
                    
                    <hr class="my-2 border-gray-200 dark:border-gray-600">
                    
                    <!-- Dark mode toggle en el dropdown -->
                    <button onclick="window.toggleTheme()" class="w-full text-left px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center space-x-2">
                      <span class="dark-mode-icon">ğŸŒ™</span>
                      <span>Cambiar Tema</span>
                    </button>
                    
                    <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors font-medium">
                      ğŸ‘‹ Cerrar SesiÃ³n
                    </a>
                  </div>
                </div>
              </div>
            </div>
          {% else %}
            <!-- Usuario no logueado -->
            <a href="{{ url_for('auth.login') }}" 
               class="text-white hover:text-domi-yellow transition-colors duration-200 font-medium flex items-center space-x-1">
              <span>ğŸ”‘</span>
              <span>Iniciar SesiÃ³n</span>
            </a>
            <a href="{{ url_for('auth.register') }}" 
               class="bg-white text-domi-orange hover:bg-gray-100 px-6 py-2 rounded-full font-semibold transition-all duration-200 shadow-lg hover:shadow-xl flex items-center space-x-1">
              <span>ğŸ“</span>
              <span>Registrarse</span>
            </a>
          {% endif %}
          
          <!-- Dark mode toggle standalone (siempre visible) -->
          <button onclick="window.toggleTheme()" class="text-white hover:text-domi-yellow transition-colors duration-200 p-2 rounded-lg hover:bg-white hover:bg-opacity-20 ml-2" title="Cambiar tema">
            <span class="dark-mode-icon text-xl">ğŸŒ™</span>
          </button>
        </div>

        <!-- BotÃ³n menÃº mÃ³vil -->
        <button id="mobile-menu-btn" class="md:hidden text-white p-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition-colors">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>

      <!-- MenÃº mÃ³vil -->
      <div id="mobile-menu" class="md:hidden hidden pb-4">
        <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4 mt-4 space-y-3">
          <a href="{{ url_for('index') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
            <span>ğŸ </span>
            <span>Inicio</span>
          </a>
          
          {% if session.logged_in %}
            <!-- Usuario logueado - menÃº mÃ³vil -->
            <div class="border-b border-white border-opacity-20 pb-3 mb-3">
              <div class="flex items-center space-x-3 text-white mb-2">
                <div class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center text-sm">
                  {% if session.role == 'cliente' %}ğŸ‘¤
                  {% elif session.role == 'restaurante' %}ğŸ½ï¸
                  {% elif session.role == 'repartidor' %}ğŸšš
                  {% elif session.role == 'administrador' %}âš™ï¸
                  {% else %}ğŸ‘¤{% endif %}
                </div>
                <div>
                  <div class="text-xs opacity-75">{{ session.role|title if session.role else 'Usuario' }}</div>
                  <div class="font-semibold">{{ session.user_name or 'Usuario' }}</div>
                </div>
              </div>
            </div>
            
            {% if session.role == 'cliente' %}
            <a href="{{ url_for('cliente.menu') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ½ï¸</span>
              <span>Restaurantes</span>
            </a>
            <a href="{{ url_for('cliente.mostrar_carrito') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ›’</span>
              <span>Carrito</span>
            </a>
            <a href="{{ url_for('cliente.mis_pedidos') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ“¦</span>
              <span>Mis Pedidos</span>
            </a>
            <a href="{{ url_for('cliente.perfil') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ‘¤</span>
              <span>Mi Perfil</span>
            </a>
            {% elif session.role == 'restaurante' %}
            <a href="{{ url_for('restaurante.listar_pedidos') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ“‹</span>
              <span>Pedidos</span>
            </a>
            <a href="{{ url_for('restaurante.listar_productos') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ•</span>
              <span>Productos</span>
            </a>
            <a href="{{ url_for('restaurante.perfil') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ½ï¸</span>
              <span>Mi Restaurante</span>
            </a>
            {% elif session.role == 'repartidor' %}
            <a href="{{ url_for('repartidor.listar_pedidos') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸš›</span>
              <span>Entregas</span>
            </a>
            <a href="{{ url_for('repartidor.perfil') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸšš</span>
              <span>Mi Perfil</span>
            </a>
            {% elif session.role == 'administrador' %}
            <a href="{{ url_for('admin.list_users') }}" class="text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>âš™ï¸</span>
              <span>GestiÃ³n Usuarios</span>
            </a>
            <a href="{{ url_for('admin.list_categories') }}" class="text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ“‚</span>
              <span>CategorÃ­as</span>
            </a>
            {% endif %}
            
            <hr class="border-white border-opacity-20">
            
            <!-- Dark mode toggle en mÃ³vil -->
            <button onclick="window.toggleTheme()" class="block w-full text-left text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span class="dark-mode-icon">ğŸŒ™</span>
              <span>Cambiar Tema</span>
            </button>
            
            <a href="{{ url_for('auth.logout') }}" class="block text-red-300 hover:text-red-100 transition-colors py-2 font-medium flex items-center space-x-2">
              <span>ğŸ‘‹</span>
              <span>Cerrar SesiÃ³n</span>
            </a>
          {% else %}
            <!-- Usuario no logueado - menÃº mÃ³vil -->
            <a href="{{ url_for('cliente.menu') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ½ï¸</span>
              <span>MenÃº</span>
            </a>
            
            <hr class="border-white border-opacity-20">
            
            <a href="{{ url_for('auth.login') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ”‘</span>
              <span>Iniciar SesiÃ³n</span>
            </a>
            <a href="{{ url_for('auth.register') }}" class="block text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span>ğŸ“</span>
              <span>Registrarse</span>
            </a>
            
            <!-- Dark mode toggle en mÃ³vil para no logueados -->
            <button onclick="window.toggleTheme()" class="block w-full text-left text-white hover:text-domi-yellow transition-colors py-2 flex items-center space-x-2">
              <span class="dark-mode-icon">ğŸŒ™</span>
              <span>Cambiar Tema</span>
            </button>
          {% endif %}
        </div>
      </div>
    </div>
  </header>
  <!-- Sistema de notificaciones mejorado -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="fixed top-4 right-4 z-50 space-y-2">
      {% for category, message in messages %}
        <div class="animate-slide-in-right transform transition-all duration-300
          {% if category == 'success' %}bg-green-500 border-l-4 border-green-600 text-white
          {% elif category == 'danger' or category == 'error' %}bg-red-500 border-l-4 border-red-600 text-white
          {% elif category == 'info' %}bg-blue-500 border-l-4 border-blue-600 text-white
          {% elif category == 'warning' %}bg-yellow-500 border-l-4 border-yellow-600 text-white
          {% else %}bg-gray-500 border-l-4 border-gray-600 text-white{% endif %} 
          px-6 py-4 rounded-lg shadow-lg backdrop-blur-sm max-w-sm"
          role="alert">
          <div class="flex items-start">
            <div class="flex-shrink-0 mr-3">
              {% if category == 'success' %}âœ…
              {% elif category == 'danger' or category == 'error' %}âŒ
              {% elif category == 'info' %}â„¹ï¸
              {% elif category == 'warning' %}âš ï¸
              {% else %}ğŸ“{% endif %}
            </div>
            <div class="flex-1">
              <p class="font-medium">{{ message }}</p>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" 
                    class="flex-shrink-0 ml-4 text-white hover:text-gray-200 transition-colors">
              <span class="sr-only">Cerrar</span>
              <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
              </svg>
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

  <!-- Contenido principal -->
  <main class="min-h-screen pt-24">
    {% block content %}
    {% endblock %}
  </main>

  <!-- Footer profesional -->
  <footer class="bg-gray-900 text-white py-12 mt-16">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-4 gap-8">
        <!-- Logo y descripciÃ³n -->
        <div class="md:col-span-2">
          <div class="flex items-center space-x-3 mb-4">
            <div class="bg-domi-gradient p-2 rounded-xl">
              <div class="w-8 h-8 flex items-center justify-center text-white font-bold text-lg">
                ğŸ•
              </div>
            </div>
            <div>
              <h3 class="text-xl font-bold">DomiFlash</h3>
              <p class="text-gray-400 text-sm">Delivery rÃ¡pido y confiable</p>
            </div>
          </div>
          <p class="text-gray-300 mb-4 leading-relaxed">
            La mejor plataforma de delivery de comida. Conectamos a los mejores restaurantes 
            con clientes que buscan calidad y rapidez en cada entrega.
          </p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-domi-yellow transition-colors">
              <span class="sr-only">Facebook</span>
              ğŸ“˜
            </a>
            <a href="#" class="text-gray-400 hover:text-domi-yellow transition-colors">
              <span class="sr-only">Instagram</span>
              ğŸ“·
            </a>
            <a href="#" class="text-gray-400 hover:text-domi-yellow transition-colors">
              <span class="sr-only">Twitter</span>
              ğŸ¦
            </a>
          </div>
        </div>

        <!-- Enlaces rÃ¡pidos -->
        <div>
          <h4 class="font-semibold mb-4 text-domi-yellow">Enlaces rÃ¡pidos</h4>
          <ul class="space-y-2">
            <li><a href="{{ url_for('index') }}" class="text-gray-300 hover:text-white transition-colors">Inicio</a></li>
            <li><a href="{{ url_for('cliente.menu') }}" class="text-gray-300 hover:text-white transition-colors">Restaurantes</a></li>
            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">CÃ³mo funciona</a></li>
            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Soporte</a></li>
          </ul>
        </div>

        <!-- InformaciÃ³n -->
        <div>
          <h4 class="font-semibold mb-4 text-domi-yellow">InformaciÃ³n</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">TÃ©rminos y condiciones</a></li>
            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">PolÃ­tica de privacidad</a></li>
            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Trabaja con nosotros</a></li>
            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Contacto</a></li>
          </ul>
        </div>
      </div>

      <!-- Copyright -->
      <div class="border-t border-gray-700 pt-8 mt-8 text-center">
        <p class="text-gray-400">
          Â© 2024 DomiFlash. Todos los derechos reservados. 
          <span class="text-domi-yellow">Hecho con â¤ï¸ para amantes de la buena comida.</span>
        </p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  
  <!-- Auto-ocultar notificaciones -->
  <script>
    // Auto-ocultar notificaciones despuÃ©s de 5 segundos
    document.addEventListener('DOMContentLoaded', function() {
      const notifications = document.querySelectorAll('[role="alert"]');
      notifications.forEach(notification => {
        setTimeout(() => {
          notification.style.opacity = '0';
          notification.style.transform = 'translateX(100%)';
          setTimeout(() => {
            if (notification.parentNode) {
              notification.remove();
            }
          }, 300);
        }, 5000);
      });
    });
  </script>

  <!-- PWA and Premium Features Initialization -->
  <script>
    // Page loading animation
    document.addEventListener('DOMContentLoaded', () => {
      // Remove loading state
      document.body.classList.remove('page-loading');
      document.body.classList.add('page-loaded');
      
      // Initialize PWA if supported
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
          try {
            const registration = await navigator.serviceWorker.register('/static/sw.js', {
              scope: '/'
            });
            console.log('ğŸ”¥ Service Worker registered:', registration);
            
            // Check for updates
            registration.addEventListener('updatefound', () => {
              console.log('ğŸ”„ Service Worker update found');
            });
            
          } catch (error) {
            console.log('Service Worker registration failed:', error);
          }
        });
      }
      
      // Initialize theme from localStorage or system preference
      const savedTheme = localStorage.getItem('domiflash-theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        document.documentElement.classList.add('dark');
        document.body.setAttribute('data-theme', 'dark');
      }
      
      // Update dark mode icons
      updateDarkModeIcons();
      
      // Setup user dropdown functionality
      setupUserDropdown();
      
      // Performance metrics (development only)
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        const loadTime = performance.now();
        console.log(`âš¡ DomiFlash loaded in ${Math.round(loadTime)}ms`);
        
        // Show performance indicator
        setTimeout(() => {
          const perfIndicator = document.createElement('div');
          perfIndicator.className = 'fixed bottom-4 left-4 bg-green-500 text-white px-3 py-2 rounded-lg text-sm font-medium z-40';
          perfIndicator.textContent = `âš¡ ${Math.round(loadTime)}ms`;
          document.body.appendChild(perfIndicator);
          
          setTimeout(() => {
            perfIndicator.style.opacity = '0';
            setTimeout(() => perfIndicator.remove(), 300);
          }, 3000);
        }, 500);
      }
      
      // Setup critical error handling
      window.addEventListener('error', (e) => {
        console.error('DomiFlash Error:', e.error);
        // Could send to analytics here
      });
      
      window.addEventListener('unhandledrejection', (e) => {
        console.error('Unhandled Promise Rejection:', e.reason);
      });
    });
    
    // User dropdown functionality
    function setupUserDropdown() {
      const dropdownBtn = document.getElementById('user-menu-btn');
      const dropdown = document.getElementById('user-dropdown');
      const arrow = document.getElementById('dropdown-arrow');
      
      if (dropdownBtn && dropdown) {
        dropdownBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          const isHidden = dropdown.classList.contains('hidden');
          
          if (isHidden) {
            // Position dropdown relative to button
            const rect = dropdownBtn.getBoundingClientRect();
            dropdown.style.position = 'fixed';
            dropdown.style.top = (rect.bottom + 8) + 'px';
            dropdown.style.right = (window.innerWidth - rect.right) + 'px';
            dropdown.style.left = 'auto';
            
            dropdown.classList.remove('hidden');
            dropdown.style.opacity = '0';
            dropdown.style.transform = 'translateY(-10px)';
            
            setTimeout(() => {
              dropdown.style.transition = 'all 0.2s ease-out';
              dropdown.style.opacity = '1';
              dropdown.style.transform = 'translateY(0)';
            }, 10);
            
            if (arrow) {
              arrow.style.transform = 'rotate(180deg)';
            }
          } else {
            dropdown.style.opacity = '0';
            dropdown.style.transform = 'translateY(-10px)';
            
            setTimeout(() => {
              dropdown.classList.add('hidden');
            }, 200);
            
            if (arrow) {
              arrow.style.transform = 'rotate(0deg)';
            }
          }
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
          if (!dropdown.classList.contains('hidden')) {
            dropdown.style.opacity = '0';
            dropdown.style.transform = 'translateY(-10px)';
            
            setTimeout(() => {
              dropdown.classList.add('hidden');
            }, 200);
            
            if (arrow) {
              arrow.style.transform = 'rotate(0deg)';
            }
          }
        });
        
        // Prevent dropdown from closing when clicking inside
        dropdown.addEventListener('click', (e) => {
          e.stopPropagation();
        });
      }
    }
    
    // Update dark mode icons
    function updateDarkModeIcons() {
      const isDark = document.documentElement.classList.contains('dark');
      const icons = document.querySelectorAll('.dark-mode-icon');
      
      icons.forEach(icon => {
        icon.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
      });
    }
    
    // Theme toggle utility
    window.toggleTheme = function() {
      const html = document.documentElement;
      const isDark = html.classList.contains('dark');
      
      if (isDark) {
        html.classList.remove('dark');
        document.body.setAttribute('data-theme', 'light');
        localStorage.setItem('domiflash-theme', 'light');
      } else {
        html.classList.add('dark');
        document.body.setAttribute('data-theme', 'dark');
        localStorage.setItem('domiflash-theme', 'dark');
      }
      
      // Update all dark mode icons
      updateDarkModeIcons();
      
      if (window.showToast) {
        window.showToast(`Modo ${isDark ? 'claro' : 'oscuro'} activado`, 'info');
      }
    };
    
    // Install app utility
    window.deferredPrompt = null;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      window.deferredPrompt = e;
    });
    
    window.installApp = async function() {
      if (window.deferredPrompt) {
        window.deferredPrompt.prompt();
        const { outcome } = await window.deferredPrompt.userChoice;
        console.log('Install prompt outcome:', outcome);
        window.deferredPrompt = null;
      }
    };
  </script>
</body>
</html>
